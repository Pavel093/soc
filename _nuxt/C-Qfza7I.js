import{J as A,r as O,k as V,o as D,x as p,y as u,z as t,K as d,L as g,M as S,N as B,O as w,P as o,A as y,Q as R,D as f,R as k,S as U,T as I,U as $,_ as P,V as E,W as L}from"./BWV4kIQb.js";const C={Москва:20663,"Воронежская область":14321,Камчатка:30692},h=A("calculator",{state:()=>({region:null,hasSpouse:!1,children:[],income:{primary:null,reason:"",other:!1},property:{homes:1,homeAreaOk:!0,cars:0,carSpecOk:!0},otherBenefits:!1,currentStep:1}),getters:{totalSteps(){return 5},completedSteps(){let l=0;return this.region&&l++,this.children.length>0&&l++,this.income.primary!==null&&l++,this.property.homes>=0&&l++,typeof this.otherBenefits=="boolean"&&l++,l},pmValue(){return this.region&&C[this.region]||0},familySize(){const l=this.hasSpouse?2:1,r=this.children.filter(n=>n.age<=17||n.student&&n.age<=23);return l+r.length},monthlyIncome(){return(this.income.primary+(this.income.other,0))/12/this.familySize},percentOfPm(){return this.pmValue?this.monthlyIncome/this.pmValue:0},benefitLevel(){return this.isEligible?this.percentOfPm<.5?1:this.percentOfPm<1?2:3:0},isEligible(){return!(this.monthlyIncome>this.pmValue||this.property.homes>1&&!this.property.homeAreaOk||this.property.cars>1||this.property.cars===1&&!this.property.carSpecOk||this.otherBenefits)},benefitAmount(){switch(this.benefitLevel){case 1:return Math.round(this.pmValue*.75);case 2:return Math.round(this.pmValue*.5);case 3:return this.pmValue;default:return 0}}},actions:{nextStep(){this.currentStep<this.totalSteps&&this.currentStep++},prevStep(){this.currentStep>1&&this.currentStep--},addChild(){this.children.push({age:0,student:!1})},removeChild(l){this.children.splice(l,1)}}});async function N(){try{const r=await(await fetch("https://ipapi.co/json/")).json(),n=r.region||r.region_name||r.federal_district;if(n&&C[n])return n;const a=`${n} область`;return n&&C[a]?a:null}catch(l){return console.error("Ошибка при определении региона:",l),null}}const T=["value"],z={key:0},_={__name:"Step1Region",setup(l){const r=h(),n=O(!1),a=V({get:()=>r.region,set:e=>r.region=e});return D(async()=>{if(!r.region){n.value=!0;try{const e=await N();e&&(a.value=e)}finally{n.value=!1}}}),(e,s)=>(u(),p("div",null,[s[2]||(s[2]=t("h2",null,"1. Регион проживания",-1)),d(t("select",{"onUpdate:modelValue":s[0]||(s[0]=v=>a.value=v)},[s[1]||(s[1]=t("option",{disabled:"",value:""},"Выберите регион",-1)),(u(!0),p(B,null,w(o(C),(v,i)=>(u(),p("option",{key:i,value:i},y(i)+" (ПМ: "+y(v)+" руб.) ",9,T))),128))],512),[[S,a.value]]),n.value?(u(),p("p",z,"Определяем ваш регион...")):g("",!0)]))}},j=["onUpdate:modelValue"],F=["onUpdate:modelValue"],W=["onClick"],J={__name:"Step2Family",setup(l){const r=h(),{hasSpouse:n,children:a}=R(r),{addChild:e,removeChild:s}=r;return(v,i)=>(u(),p("div",null,[i[4]||(i[4]=t("h2",null,"2. Состав семьи",-1)),t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":i[0]||(i[0]=m=>U(n)?n.value=m:null)},null,512),[[k,o(n)]]),i[2]||(i[2]=f(" Есть супруг(а) "))]),i[5]||(i[5]=t("h3",null,"Дети:",-1)),(u(!0),p(B,null,w(o(a),(m,x)=>(u(),p("div",{key:x,class:"child"},[d(t("input",{type:"number","onUpdate:modelValue":c=>m.age=c,min:"0",max:"23"},null,8,j),[[I,m.age,void 0,{number:!0}]]),t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":c=>m.student=c},null,8,F),[[k,m.student]]),i[3]||(i[3]=f(" Студент очного отделения (до 23 лет) "))]),t("button",{onClick:c=>o(s)(x)},"Удалить",8,W)]))),128)),t("button",{onClick:i[1]||(i[1]=(...m)=>o(e)&&o(e)(...m))},"Добавить ребенка")]))}},K={key:0},Q={__name:"Step3Income",setup(l){const r=h(),n=V({get:()=>r.income,set:a=>r.income=a});return(a,e)=>(u(),p("div",null,[e[7]||(e[7]=t("h2",null,"3. Доходы семьи",-1)),e[8]||(e[8]=t("label",null,"Ваш доход за год больше или меньше 89 760 руб.?",-1)),d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o(n).primary=s)},e[3]||(e[3]=[t("option",{disabled:"",value:""},"Выберите",-1),t("option",{value:89760*1.1},"Больше",-1),t("option",{value:44880},"Меньше",-1)]),512),[[S,o(n).primary,void 0,{number:!0}]]),o(n).primary<89760?(u(),p("div",K,[e[5]||(e[5]=t("label",null,"Выберите причину:",-1)),d(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>o(n).reason=s)},e[4]||(e[4]=[t("option",{value:"care"},"Уход за ребенком до 3 лет",-1),t("option",{value:"unemployed"},"Безработица (до 6 мес)",-1),t("option",{value:"study"},"Очное обучение",-1),t("option",{value:"service"},"Служба/мобилизация",-1)]),512),[[S,o(n).reason]])])):g("",!0),t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=s=>o(n).other=s)},null,512),[[k,o(n).other]]),e[6]||(e[6]=f(" Есть другие доходы (алименты, пенсии...)"))])]))}},q={key:0},G={key:1},H={__name:"Step4Property",setup(l){const r=h(),n=V({get:()=>r.property,set:a=>r.property=a});return(a,e)=>(u(),p("div",null,[e[8]||(e[8]=t("h2",null,"4. Имущественные условия",-1)),e[9]||(e[9]=t("label",null,"Количество квартир/домов:",-1)),d(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>o(n).homes=s)},e[4]||(e[4]=[t("option",{value:1},"1",-1),t("option",{value:2},"более 1",-1)]),512),[[S,o(n).homes,void 0,{number:!0}]]),o(n).homes>1?(u(),p("div",q,[t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=s=>o(n).homeAreaOk=s)},null,512),[[k,o(n).homeAreaOk]]),e[5]||(e[5]=f(" Общая площадь на человека ≤24 м²"))])])):g("",!0),e[10]||(e[10]=t("label",null,"Автомобили:",-1)),d(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>o(n).cars=s)},e[6]||(e[6]=[t("option",{value:0},"нет",-1),t("option",{value:1},"1",-1),t("option",{value:2},"более 1",-1)]),512),[[S,o(n).cars,void 0,{number:!0}]]),o(n).cars===1?(u(),p("div",G,[t("label",null,[d(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=s=>o(n).carSpecOk=s)},null,512),[[k,o(n).carSpecOk]]),e[7]||(e[7]=f(" Мощность ≤250 л.с., возраст старше 5 лет"))])])):g("",!0)]))}},X={__name:"Step5Benefits",setup(l){const r=h(),n=V({get:()=>r.otherBenefits,set:a=>r.otherBenefits=a});return(a,e)=>(u(),p("div",null,[e[4]||(e[4]=t("h2",null,"5. Получает ли семья другие пособия?",-1)),t("label",null,[d(t("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=s=>U(n)?n.value=s:null),value:!0},null,512),[[$,o(n)]]),e[2]||(e[2]=f(" Да"))]),t("label",null,[d(t("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=s=>U(n)?n.value=s:null),value:!1},null,512),[[$,o(n)]]),e[3]||(e[3]=f(" Нет"))])]))}},Y={class:"container"},Z={class:"content base-bg-color-two"},ee={class:"progress base-bg-color"},te={class:"controls base-bg-color-two"},ne=["disabled"],oe={key:0,class:"result"},se={key:0},re={key:1},le={__name:"calculator",setup(l){const r=h(),n=O(!1),a=V(()=>{switch(r.currentStep){case 1:return _;case 2:return J;case 3:return Q;case 4:return H;case 5:return X;default:return _}});function e(){r.prevStep()}function s(){r.nextStep()}function v(){n.value=!0}const{currentStep:i,totalSteps:m,completedSteps:x,isEligible:c,benefitAmount:M}=R(r);return(ie,b)=>(u(),p("div",Y,[b[2]||(b[2]=t("div",{class:"header base-bg-color"},[t("h1",{class:"dark-text"}," Рассчитайте размер единого пособия онлайн — быстро, бесплатно и без регистрации ")],-1)),t("div",Z,[t("div",ee," Шаг "+y(o(i))+" из "+y(o(m))+" | Выполнено: "+y(o(x)),1),(u(),E(L(a.value)))]),t("div",te,[t("button",{class:"big-button",onClick:e,disabled:o(i)===1},"назад",8,ne),o(i)<o(m)?(u(),p("button",{key:0,class:"big-button",onClick:s},"далее")):(u(),p("button",{key:1,onClick:v},"рассчитать"))]),n.value?(u(),p("div",oe,[b[1]||(b[1]=t("h2",null,"Результат:",-1)),o(c)?(u(),p("p",re,[b[0]||(b[0]=f(" Размер пособия: ")),t("strong",null,y(o(M))+" руб./мес",1)])):(u(),p("p",se,"Вы не соответствуете условиям."))])):g("",!0)]))}},ae=P(le,[["__scopeId","data-v-ee535f56"]]);export{ae as default};
